{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _defineProperty from\"/Users/kuznetsovaleria/mesto-react-auth/react-mesto-auth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/kuznetsovaleria/mesto-react-auth/react-mesto-auth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/kuznetsovaleria/mesto-react-auth/react-mesto-auth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{useHistory}from\"react-router-dom\";import\"./styles/Welcome.css\";function Login(_ref){var onLogin=_ref.onLogin;var initialData={email:\"\",password:\"\"};var _useState=useState(initialData),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),message=_useState4[0],setMessage=_useState4[1];var history=useHistory();// ОБРАБОТКА ИЗМЕНЕНИЙ В ИНПУТАХ\nfunction handleInputChange(evt){var _evt$target=evt.target,name=_evt$target.name,value=_evt$target.value;setData(function(data){return _objectSpread(_objectSpread({},data),{},_defineProperty({},name,value));});}// ОЧИТСКА ФОРМЫ\nfunction resetForm(){setData(initialData);setMessage(\"\");}// ОБРАБОТКА САБМИТА\nfunction handleSubmit(evt){evt.preventDefault();if(!data.email||!data.password){return;}onLogin(data).then(resetForm).then(function(){return history.push(\"/\");}).catch(function(err){return setMessage(err.message||\"Что-то пошло не так\");});}return/*#__PURE__*/_jsx(\"div\",{className:\"welcome\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"welcome__form\",autoComplete:\"off\",noValidate:true,children:[/*#__PURE__*/_jsx(\"h3\",{className:\"welcome__title\",children:\"\\u0412\\u0445\\u043E\\u0434\"}),/*#__PURE__*/_jsx(\"p\",{className:\"welcome__error\",children:message}),/*#__PURE__*/_jsx(\"input\",{id:\"login-email\",name:\"email\",type:\"email\",className:\"welcome__input\",placeholder:\"Email\",value:data.email,onChange:handleInputChange,required:true}),/*#__PURE__*/_jsx(\"input\",{id:\"login-password\",name:\"password\",type:\"password\",className:\"welcome__input\",placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",value:data.password,onChange:handleInputChange,required:true}),/*#__PURE__*/_jsx(\"button\",{className:\"welcome__button\",type:\"submit\",children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})]})});}export default Login;","map":{"version":3,"sources":["/Users/kuznetsovaleria/mesto-react-auth/react-mesto-auth/src/components/Login.js"],"names":["React","useState","useHistory","Login","onLogin","initialData","email","password","data","setData","message","setMessage","history","handleInputChange","evt","target","name","value","resetForm","handleSubmit","preventDefault","then","push","catch","err"],"mappings":"smBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,MAAO,sBAAP,CAEA,QAASC,CAAAA,KAAT,MAA4B,IAAXC,CAAAA,OAAW,MAAXA,OAAW,CAC1B,GAAMC,CAAAA,WAAW,CAAG,CAClBC,KAAK,CAAE,EADW,CAElBC,QAAQ,CAAE,EAFQ,CAApB,CAD0B,cAKFN,QAAQ,CAACI,WAAD,CALN,wCAKnBG,IALmB,eAKbC,OALa,8BAMIR,QAAQ,CAAC,EAAD,CANZ,yCAMnBS,OANmB,eAMVC,UANU,eAO1B,GAAMC,CAAAA,OAAO,CAAGV,UAAU,EAA1B,CAEA;AACA,QAASW,CAAAA,iBAAT,CAA2BC,GAA3B,CAAgC,iBACNA,GAAG,CAACC,MADE,CACtBC,IADsB,aACtBA,IADsB,CAChBC,KADgB,aAChBA,KADgB,CAE9BR,OAAO,CAAC,SAACD,IAAD,wCACHA,IADG,wBAELQ,IAFK,CAEEC,KAFF,IAAD,CAAP,CAID,CAED;AACA,QAASC,CAAAA,SAAT,EAAqB,CACnBT,OAAO,CAACJ,WAAD,CAAP,CACAM,UAAU,CAAC,EAAD,CAAV,CACD,CAED;AACA,QAASQ,CAAAA,YAAT,CAAsBL,GAAtB,CAA2B,CACzBA,GAAG,CAACM,cAAJ,GACA,GAAI,CAACZ,IAAI,CAACF,KAAN,EAAe,CAACE,IAAI,CAACD,QAAzB,CAAmC,CACjC,OACD,CACDH,OAAO,CAACI,IAAD,CAAP,CACGa,IADH,CACQH,SADR,EAEGG,IAFH,CAEQ,iBAAMT,CAAAA,OAAO,CAACU,IAAR,CAAa,GAAb,CAAN,EAFR,EAGGC,KAHH,CAGS,SAACC,GAAD,QAASb,CAAAA,UAAU,CAACa,GAAG,CAACd,OAAJ,EAAe,qBAAhB,CAAnB,EAHT,EAID,CAED,mBACE,YAAK,SAAS,CAAC,SAAf,uBACE,cACE,QAAQ,CAAES,YADZ,CAEE,SAAS,CAAC,eAFZ,CAGE,YAAY,CAAC,KAHf,CAIE,UAAU,KAJZ,wBAME,WAAI,SAAS,CAAC,gBAAd,sCANF,cAOE,UAAG,SAAS,CAAC,gBAAb,UAA+BT,OAA/B,EAPF,cAQE,cACE,EAAE,CAAC,aADL,CAEE,IAAI,CAAC,OAFP,CAGE,IAAI,CAAC,OAHP,CAIE,SAAS,CAAC,gBAJZ,CAKE,WAAW,CAAC,OALd,CAME,KAAK,CAAEF,IAAI,CAACF,KANd,CAOE,QAAQ,CAAEO,iBAPZ,CAQE,QAAQ,KARV,EARF,cAkBE,cACE,EAAE,CAAC,gBADL,CAEE,IAAI,CAAC,UAFP,CAGE,IAAI,CAAC,UAHP,CAIE,SAAS,CAAC,gBAJZ,CAKE,WAAW,CAAC,sCALd,CAME,KAAK,CAAEL,IAAI,CAACD,QANd,CAOE,QAAQ,CAAEM,iBAPZ,CAQE,QAAQ,KARV,EAlBF,cA4BE,eAAQ,SAAS,CAAC,iBAAlB,CAAoC,IAAI,CAAC,QAAzC,4CA5BF,GADF,EADF,CAoCD,CAED,cAAeV,CAAAA,KAAf","sourcesContent":["import React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport \"./styles/Welcome.css\";\n\nfunction Login({ onLogin }) {\n  const initialData = {\n    email: \"\",\n    password: \"\",\n  };\n  const [data, setData] = useState(initialData);\n  const [message, setMessage] = useState(\"\");\n  const history = useHistory();\n\n  // ОБРАБОТКА ИЗМЕНЕНИЙ В ИНПУТАХ\n  function handleInputChange(evt) {\n    const { name, value } = evt.target;\n    setData((data) => ({\n      ...data,\n      [name]: value,\n    }));\n  }\n\n  // ОЧИТСКА ФОРМЫ\n  function resetForm() {\n    setData(initialData);\n    setMessage(\"\");\n  }\n\n  // ОБРАБОТКА САБМИТА\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    if (!data.email || !data.password) {\n      return;\n    }\n    onLogin(data)\n      .then(resetForm)\n      .then(() => history.push(\"/\"))\n      .catch((err) => setMessage(err.message || \"Что-то пошло не так\"));\n  }\n\n  return (\n    <div className=\"welcome\">\n      <form\n        onSubmit={handleSubmit}\n        className=\"welcome__form\"\n        autoComplete=\"off\"\n        noValidate\n      >\n        <h3 className=\"welcome__title\">Вход</h3>\n        <p className=\"welcome__error\">{message}</p>\n        <input\n          id=\"login-email\"\n          name=\"email\"\n          type=\"email\"\n          className=\"welcome__input\"\n          placeholder=\"Email\"\n          value={data.email}\n          onChange={handleInputChange}\n          required\n        ></input>\n        <input\n          id=\"login-password\"\n          name=\"password\"\n          type=\"password\"\n          className=\"welcome__input\"\n          placeholder=\"Пароль\"\n          value={data.password}\n          onChange={handleInputChange}\n          required\n        ></input>\n        <button className=\"welcome__button\" type=\"submit\">\n          Войти\n        </button>\n      </form>\n    </div>\n  );\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}