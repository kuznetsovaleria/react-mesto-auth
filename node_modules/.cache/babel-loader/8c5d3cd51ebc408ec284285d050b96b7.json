{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _toConsumableArray from\"/Users/kuznetsovaleria/test/mesto-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/kuznetsovaleria/test/mesto-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import Header from\"./Header\";import Main from\"./Main\";import Footer from\"./Footer\";import PopupWithForm from\"./PopupWithForm\";import ImagePopup from\"./ImagePopup\";import React from\"react\";import api from\"../api/api\";import EditProfilePopup from\"./EditProfilePopup\";import EditAvatarPopup from\"./EditAvatarPopup\";import AddPlacePopup from\"./AddPlacePopup\";import{CurrentUserContext}from\"../contexts/CurrentUserContext\";function App(){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isEditAvatarPopupOpen=_React$useState2[0],setIsEditAvatarPopupOpen=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isEditProfilePopupOpen=_React$useState4[0],setIsEditProfilePopupOpen=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isAddPlacePopupOpen=_React$useState6[0],setIsAddPlacePopupOpen=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),isImagePopupOpen=_React$useState8[0],setIsImagePopupOpen=_React$useState8[1];var _React$useState9=React.useState({}),_React$useState10=_slicedToArray(_React$useState9,2),selectedCard=_React$useState10[0],setSelectedCard=_React$useState10[1];var _React$useState11=React.useState({}),_React$useState12=_slicedToArray(_React$useState11,2),currentUser=_React$useState12[0],setCurrentUser=_React$useState12[1];var _React$useState13=React.useState([]),_React$useState14=_slicedToArray(_React$useState13,2),cards=_React$useState14[0],setCards=_React$useState14[1];// ЗАГРУЗКА КАРТОЧЕК И ИНФОРМАЦИИ О ПОЛЬЗОВАТЕЛЕ С СЕРВЕРА\nReact.useEffect(function(){Promise.all([api.getUserData(),api.getInitialCards()]).then(function(_ref){var _ref2=_slicedToArray(_ref,2),userData=_ref2[0],cards=_ref2[1];setCurrentUser(userData);setCards(cards);}).catch(function(err){console.log(err);});},[]);//ОТКРЫТЬ РЕДАКТИРОВАНИЕ АВАТАРА\nfunction handleEditAvatarClick(){setIsEditAvatarPopupOpen(true);}// РЕДАКТИРОВАНИЕ АВАТАРА\nfunction handleUpdateAvatar(userAvatar){api.changeUserAvatar({link:userAvatar.avatar}).then(function(userInfo){setCurrentUser(userInfo);closeAllPopups();}).catch(function(err){console.log(err);});}// ОТКРЫТЬ РЕДАКТИРОВАНИЕ ПРОФИЛЯ\nfunction handleEditProfileClick(){setIsEditProfilePopupOpen(true);}// РЕДАКТИРОВАНИЕ ПРОФИЛЯ\nfunction handleUpdateUser(userData){api.editUserInfo(userData).then(function(userInfo){setCurrentUser(userInfo);closeAllPopups();}).catch(function(err){console.log(err);});}// ОТКРЫТЬ ДОБАВЛЕНИЕ КАРТОЧКИ С МЕСТОМ\nfunction handleAddPlaceClick(){setIsAddPlacePopupOpen(true);}// ДОБАВИТЬ КАРТОЧКУ\nfunction handleAddPlaceSubmit(cardData){api.addNewCard(cardData).then(function(newCard){setCards([newCard].concat(_toConsumableArray(cards)));closeAllPopups();}).catch(function(err){console.log(err);});}// ЛАЙК/ДИЗЛАЙК\nfunction handleCardLike(card){var isLiked=card.likes.some(function(i){return i._id===currentUser._id;});var likeRequest=!isLiked?api.putLike(card._id):api.removeLike(card._id);likeRequest.then(function(newCard){var newCards=cards.map(function(c){return c._id===card._id?newCard:c;});setCards(newCards);}).catch(function(err){console.log(err);});}// УДАЛЕНИЕ КАРТОЧКИ\nfunction handleCardDelete(card){api.deleteCard(card._id).then(function(){var newCards=cards.filter(function(c){return c._id!==card._id;});setCards(newCards);}).catch(function(err){console.log(err);});}// ОТКРЫТЬ КАРТИНКУ\nfunction handleCardClick(card){setSelectedCard(card);setIsImagePopupOpen(true);}// ЗАКРЫТЬ ПОПАПЫ\nfunction closeAllPopups(){setIsEditAvatarPopupOpen(false);setIsEditProfilePopupOpen(false);setIsAddPlacePopupOpen(false);setSelectedCard({});setIsImagePopupOpen(false);}return/*#__PURE__*/_jsx(\"div\",{className:\"page\",children:/*#__PURE__*/_jsxs(CurrentUserContext.Provider,{value:currentUser,children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{onEditAvatar:handleEditAvatarClick,onEditProfile:handleEditProfileClick,onAddPlace:handleAddPlaceClick,onCardClick:handleCardClick,cards:cards,onCardLike:handleCardLike,onCardDelete:handleCardDelete}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,onUpdateUser:handleUpdateUser}),/*#__PURE__*/_jsx(AddPlacePopup,{isOpen:isAddPlacePopupOpen,onClose:closeAllPopups,onAddPlace:handleAddPlaceSubmit}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/_jsx(PopupWithForm,{title:\"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B?\",name:\"delete-place\",isOpen:false,onClose:closeAllPopups}),/*#__PURE__*/_jsx(ImagePopup,{card:selectedCard,isOpen:isImagePopupOpen,onClose:closeAllPopups})]})});}export default App;","map":{"version":3,"sources":["/Users/kuznetsovaleria/test/mesto-react/src/components/App.js"],"names":["Header","Main","Footer","PopupWithForm","ImagePopup","React","api","EditProfilePopup","EditAvatarPopup","AddPlacePopup","CurrentUserContext","App","useState","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isImagePopupOpen","setIsImagePopupOpen","selectedCard","setSelectedCard","currentUser","setCurrentUser","cards","setCards","useEffect","Promise","all","getUserData","getInitialCards","then","userData","catch","err","console","log","handleEditAvatarClick","handleUpdateAvatar","userAvatar","changeUserAvatar","link","avatar","userInfo","closeAllPopups","handleEditProfileClick","handleUpdateUser","editUserInfo","handleAddPlaceClick","handleAddPlaceSubmit","cardData","addNewCard","newCard","handleCardLike","card","isLiked","likes","some","i","_id","likeRequest","putLike","removeLike","newCards","map","c","handleCardDelete","deleteCard","filter","handleCardClick"],"mappings":"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","sourcesContent":["import Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport ImagePopup from \"./ImagePopup\";\nimport React from \"react\";\nimport api from \"../api/api\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nfunction App() {\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isImagePopupOpen, setIsImagePopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n\n  // ЗАГРУЗКА КАРТОЧЕК И ИНФОРМАЦИИ О ПОЛЬЗОВАТЕЛЕ С СЕРВЕРА\n  React.useEffect(() => {\n    Promise.all([api.getUserData(), api.getInitialCards()])\n      .then(([userData, cards]) => {\n        setCurrentUser(userData);\n        setCards(cards);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }, []);\n\n  //ОТКРЫТЬ РЕДАКТИРОВАНИЕ АВАТАРА\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  // РЕДАКТИРОВАНИЕ АВАТАРА\n  function handleUpdateAvatar(userAvatar) {\n    api\n      .changeUserAvatar({ link: userAvatar.avatar })\n      .then((userInfo) => {\n        setCurrentUser(userInfo);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  // ОТКРЫТЬ РЕДАКТИРОВАНИЕ ПРОФИЛЯ\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  // РЕДАКТИРОВАНИЕ ПРОФИЛЯ\n  function handleUpdateUser(userData) {\n    api\n      .editUserInfo(userData)\n      .then((userInfo) => {\n        setCurrentUser(userInfo);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  // ОТКРЫТЬ ДОБАВЛЕНИЕ КАРТОЧКИ С МЕСТОМ\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  // ДОБАВИТЬ КАРТОЧКУ\n  function handleAddPlaceSubmit(cardData) {\n    api\n      .addNewCard(cardData)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  // ЛАЙК/ДИЗЛАЙК\n  function handleCardLike(card) {\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\n    const likeRequest = !isLiked\n      ? api.putLike(card._id)\n      : api.removeLike(card._id);\n\n    likeRequest\n      .then((newCard) => {\n        const newCards = cards.map((c) => (c._id === card._id ? newCard : c));\n        setCards(newCards);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  // УДАЛЕНИЕ КАРТОЧКИ\n  function handleCardDelete(card) {\n    api\n      .deleteCard(card._id)\n      .then(() => {\n        const newCards = cards.filter((c) => c._id !== card._id);\n        setCards(newCards);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  // ОТКРЫТЬ КАРТИНКУ\n  function handleCardClick(card) {\n    setSelectedCard(card);\n    setIsImagePopupOpen(true);\n  }\n\n  // ЗАКРЫТЬ ПОПАПЫ\n  function closeAllPopups() {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setSelectedCard({});\n    setIsImagePopupOpen(false);\n  }\n\n  return (\n    <div className=\"page\">\n      <CurrentUserContext.Provider value={currentUser}>\n        <Header />\n        <Main\n          onEditAvatar={handleEditAvatarClick}\n          onEditProfile={handleEditProfileClick}\n          onAddPlace={handleAddPlaceClick}\n          onCardClick={handleCardClick}\n          cards={cards}\n          onCardLike={handleCardLike}\n          onCardDelete={handleCardDelete}\n        />\n        <Footer />\n\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}\n        />\n\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddPlace={handleAddPlaceSubmit}\n        />\n\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n        />\n\n        <PopupWithForm\n          title=\"Вы уверены?\"\n          name=\"delete-place\"\n          isOpen={false}\n          onClose={closeAllPopups}\n        ></PopupWithForm>\n\n        <ImagePopup\n          card={selectedCard}\n          isOpen={isImagePopupOpen}\n          onClose={closeAllPopups}\n        />\n      </CurrentUserContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}